[{"content":"定义告警规则\r为了监控目标定义告警规则，告知Prometheus在什么条件下生成告警，并通过AlertManager发送告警通知。\n在 Prometheus 配置文件中指定告警规则文件路径：\n1 2 rule_files: - \u0026#34;rules/*yml\u0026#34; 配置说明：\n\u0026quot;rules/*yml\u0026quot;: 告警规则文件存放在rules目录下，以.yml结尾 ","date":"2024-10-31T00:10:41+08:00","permalink":"http://localhost:1313/p/alertmanager%E5%91%8A%E8%AD%A6%E9%80%9A%E7%9F%A5-%E5%AE%9A%E4%B9%89%E5%91%8A%E8%AD%A6%E8%A7%84%E5%88%99/","title":"AlertManager告警通知 - 定义告警规则"},{"content":"一、测试yaml文件\r测试yaml文件\n1 kubectl apply -f datasense-business-cm.yaml 二、在线编辑\r1 kubectl edit cm -n mid datasense-business 出现如下乱码 三、在线格式化查看\r1 kubectl get cm -n mid datasense-business -o json |jq \u0026#39;.data.\u0026#34;application.yaml\u0026#34;\u0026#39; -r 使用jq查看可以看到正常格式，但是想要在线修改就比较麻烦\n四、检查原始yaml\r检查原始yaml文件格式，如果原始yaml无法找到，则可以根据第3点导出和修改为正常格式的yaml文件\n1 2 3 4 5 [root@k8s-master ~]# yamllint datasense-business-cm.yaml datasense-business-cm.yaml 22:81 error line too long (161 \u0026gt; 80 characters) (line-length) 107:52 error trailing spaces (trailing-spaces) 132:81 error line too long (84 \u0026gt; 80 characters) (line-length) 从结果输出可以看到yaml检查报错，第二行，显示第107行尾部有空格。 打开文件检查，确实如此，如下图：\n五、修改yaml \u0026amp; 验证\r删除107行尾号的空格，重新生效配置文件\n1 kubectl apply -f datasense-business-cm.yaml 再次在线编辑验证，可以看到已经变回正常格式。\n1 kubectl edit cm -n mid datasense-business === END ===\n","date":"2024-10-31T00:10:41+08:00","permalink":"http://localhost:1313/p/k8s-configmap%E6%A0%BC%E5%BC%8F%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98/","title":"k8s configmap格式乱码问题"},{"content":"一、概述\rsystemctl 是 Linux 系统中的核心工具之一，用于管理和控制由 systemd 启动的服务和系统组件。作为系统管理员或开发人员，通过 systemctl 可以控制系统服务的启动、停止、重启以及检查其运行状态，这在系统维护、故障排查和资源优化方面都极为重要。systemctl list-units --type=service --state=running 是一个常用命令，它列出了当前正在运行的所有服务，为用户提供系统中活跃进程的简要视图。\n二、systemctl list-units 命令详解\r--type=service：该选项指定仅显示服务单元（即 *.service 文件）。在 systemd 中，所有服务都是以 .service 结尾的单元文件。\n--state=running：此选项用于过滤出当前处于 \u0026quot;running\u0026quot; 状态的服务。由于服务可能处于不同的状态（例如 \u0026ldquo;enabled\u0026rdquo; 表示已启用但未运行，\u0026quot;failed\u0026quot; 表示服务启动失败），这个选项帮助我们快速聚焦正在正常运行的服务。\n三、输出说明\r运行 systemctl list-units --type=service --state=running 后，系统会显示当前正在运行的服务列表，每一行包含服务名称、加载状态、激活状态和简短描述。\n例如： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 (base) [root@localhost ~]# systemctl list-units --type=service --state=running UNIT LOAD ACTIVE SUB DESCRIPTION 1panel.service loaded active running 1Panel, a modern open source linux panel atd.service loaded active running Deferred execution scheduler auditd.service loaded active running Security Auditing Service crond.service loaded active running Command Scheduler dbus.service loaded active running D-Bus System Message Bus docker.service loaded active running Docker Application Container Engine firewalld.service loaded active running firewalld - dynamic firewall daemon getty@tty1.service loaded active running Getty on tty1 gitlab-runner.service loaded active running GitLab Runner gssproxy.service loaded active running GSSAPI Proxy Daemon iBMA.service loaded active running iBMA: iBMA service irqbalance.service loaded active running irqbalance daemon libstoragemgmt.service loaded active running libstoragemgmt plug-in server daemon mdmonitor.service loaded active running MD array monitor NetworkManager.service loaded active running Network Manager ollama.service loaded active running Ollama Service polkit.service loaded active running Authorization Manager rdma-ndd.service loaded active running RDMA Node Description Daemon rngd.service loaded active running Hardware RNG Entropy Gatherer Daemon rpcbind.service loaded active running RPC Bind rsyslog.service loaded active running System Logging Service smartd.service loaded active running Self Monitoring and Reporting Technology (SMART) Daemon sshd.service loaded active running OpenSSH server daemon systemd-hostnamed.service loaded active running Hostname Service systemd-journald.service loaded active running Journal Service systemd-logind.service loaded active running User Login Management systemd-machined.service loaded active running Virtual Machine and Container Registration Service systemd-udevd.service loaded active running Rule-based Manager for Device Events and Files tuned.service loaded active running Dynamic System Tuning Daemon LOAD = Reflects whether the unit definition was properly loaded. ACTIVE = The high-level unit activation state, i.e. generalization of SUB. SUB = The low-level unit activation state, values depend on unit type. 29 loaded units listed. 输出中每个字段的含义如下：\nUNIT：服务的单元名称（例如 sshd.service）。 LOAD：服务的加载状态，通常显示为 loaded，表明服务单元已成功加载。 ACTIVE：服务的激活状态，active 表示服务已激活并处于运行状态。 SUB：服务的子状态，提供更详细的状态信息。例如，running 表示服务正在正常运行。 DESCRIPTION：服务的简短描述，通常帮助用户快速理解服务的用途。 五、总结\r通过 systemctl list-units --type=service --state=running，系统管理员能够快速了解当前系统中运行的服务情况，有助于监控系统资源并确保关键服务的正常运转。熟练使用 systemctl 管理服务单元对于提升系统的稳定性、可靠性至关重要，特别是在保障服务器和应用服务的高可用性方面。\n=== END ===\n","date":"2024-10-30T23:59:41+08:00","permalink":"http://localhost:1313/p/linux%E6%9C%8D%E5%8A%A1%E4%B9%8B-systemctl-%E7%AE%A1%E7%90%86/","title":"Linux服务之 Systemctl 管理"},{"content":"下载安装包\r我们进入官网下载安装包\n","date":"2024-10-30T09:08:41+08:00","permalink":"http://localhost:1313/p/go%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8%E5%AE%89%E8%A3%85/","title":"Go语言入门安装"},{"content":"\r一、Hugo 搭建技术分享\r","date":"2024-10-30T09:08:41+08:00","permalink":"http://localhost:1313/p/hugo-stack-%E4%B8%BB%E9%A2%98%E9%85%8D%E5%90%88-github-%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/","title":"Hugo stack 主题配合 Github 搭建个人博客"}]